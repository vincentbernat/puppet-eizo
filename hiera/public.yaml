eizo::debian::packages:
  - zsh
  - mg
  - vim-tiny
  - git
  - lm-sensors
  - smartmontools
  - usbutils
  - lshw
  - pciutils
  - parted
  - avahi-daemon
  - i965-va-driver
  - alsa-utils
  - lldpd
  - htop

eizo::xbmc::home: /srv/xbmc
eizo::xbmc::screen: 'card0-HDMI-A-3'

eizo::transmission::rpcport: 9099
eizo::transmission::download: /srv/transmission
eizo::transmission::config:
  alt-speed-down: 200
  alt-speed-up: 10
  alt-speed-enabled: false
  alt-speed-time-enabled: false
  speed-limit-down: 400
  speed-limit-down-enabled: true
  speed-limit-up: 30
  speed-limit-up-enabled: true
  encryption: 2
  peer-port: 9098
  peer-limit-global: 240
  peer-limit-per-torrent: 60
  download-queue-enabled: true
  download-queue-size: 5
  umask: 2
  ratio-limit: 1
  ratio-limit-enabled: true
  rpc-whitelist:
    - "127.0.0.1"
    - "192.168.116.*"
  rpc-whitelist-enabled: true
  rpc-bind-address: "0.0.0.0"
  rpc-enabled: true
  rpc-port: "%{hiera('eizo::transmission::rpcport')}"
  rpc-url: "/transmission/"

eizo::flexget::home: /srv/flexget
eizo::flexget::config:
  templates:

    global:
      headers:
        User-Agent: "Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0"
      email:
        active: True
        from: bernat@luffy.cx
        to: bernat@luffy.cx
        smtp_host: localhost
      content_filter:
        reject: '*.rar'
      transmission:
        host: localhost
        port: 9099
      clean_transmission:
        host: localhost
        port: 9099
        finished_for: 2 days
        min_ratio: 1
      magnets: no

  tasks:

    movie:
      movie_queue: yes
      discover:
        what:
          - emit_movie_queue: yes
        from:
          - kat:
              category: movies
              verified: yes
          - piratebay:
              category: "highres movies"
              sort_by: seeds
          - torrentz: verified
      set:
        path: "/srv/transmission/complete/Film"
        main_file_only: Yes
        include_subs: Yes
      quality: 720p+ webdl+
      content_size:
        max: 5000

    anime:
      inputs:
        - rss: 'http://tracker.yibis.com/rss.xml'
        - rss: 'http://www.nyaatorrents.org/?page=rss&term=HorribleSubs+mkv'
      series:
        720p:
          - Naruto Shippuuden
          - Fairy Tail
          - One Piece
      set:
        path: "/srv/transmission/complete/TV/{{ series_name }}"

    tv:
      inputs:
        - rss: "http://rss.thepiratebay.se/208"
        - rss: "http://kickass.to/tv/?rss=1"
        - rss: "http://feeds.feedburner.com/eztv-rss-atom-feeds?format=xml"
        - rss: 'http://torrentz.eu/feed?q=hdtv+720p'
        - rss: "http://rss.bt-chat.com/?cat=9"
        - rss: "http://showrss.info/feeds/all.rss"
      cookies: ~/.flexget/cookies.txt
      series:
        settings:
          normal:
            timeframe: 8 hours
            target: 720p hdtv+ dd5.1|ac3|dts
            quality: 720p
            propers: 4 days
        normal:
          - Modern Family
          - Breaking Bad
          - The Big Bang Theory
          - Two and a Half Men
          - The Walking Dead
          - Boardwalk Empire
          - Justified
          - Orange is the New Black
          - Game Of Thrones
          - Homeland
          - 2 Broke Girls
          - Person of Interest
          - House of Cards
          - Parks and Recreation
          - True Detective
          - Banshee
          - Broadchurch
          - Silicon Valley
          - Sherlock
          - Gotham
          - Suits
          - The Flash
          - In the Flesh
          - Episodes:
              exact: yes
      set:
        path: "/srv/transmission/complete/TV/{{ series_name }}"
        main_file_only: Yes
        include_subs: Yes

nginx::package::debian::package_name: nginx-full
nginx::package::debian::manage_repo: false

nginx::nginx_upstreams:
  'transmission':
    members:
      - "localhost:%{hiera('eizo::transmission::rpcport')}"

nginx::nginx_vhosts:
  "%{::fqdn}":
    ipv6_enable: true
    ssl: true
    ssl_cert: "/etc/nginx/ssl/%{::hostname}.pem"
    ssl_key: "/etc/nginx/ssl/%{::hostname}.key"
    ssl_port: 443
    ssl_protocols: "TLSv1 TLSv1.1 TLSv1.2"
    ssl_ciphers: "EECDH+AESGCM:EECDH+AES:!SHA"
    ssl_stapling: true
    ssl_trusted_cert: "/etc/nginx/ssl/StartCom_Class_1.pem"
    spdy: "on"
    rewrite_to_https: true
    access_log: "/var/log/nginx/%{::hostname}_access.log"
    error_log: "/var/log/nginx/%{::hostname}_error.log"
    www_root: /var/www/html
    index_files:
      - index.html
      - index.nginx-debian.html

nginx::nginx_locations:
  'transmission':
    location: /transmission
    vhost: "%{::fqdn}"
    proxy: transmission
    ssl: true
    ssl_only: true

eizo::nginx::certs:
  "/etc/nginx/ssl/StartCom_Class_1.pem":
    content: |
      -----BEGIN CERTIFICATE-----
      MIIGNDCCBBygAwIBAgIBHjANBgkqhkiG9w0BAQUFADB9MQswCQYDVQQGEwJJTDEW
      MBQGA1UEChMNU3RhcnRDb20gTHRkLjErMCkGA1UECxMiU2VjdXJlIERpZ2l0YWwg
      Q2VydGlmaWNhdGUgU2lnbmluZzEpMCcGA1UEAxMgU3RhcnRDb20gQ2VydGlmaWNh
      dGlvbiBBdXRob3JpdHkwHhcNMDcxMDI0MjEwMTU1WhcNMTcxMDI0MjEwMTU1WjCB
      jDELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0Q29tIEx0ZC4xKzApBgNVBAsT
      IlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxODA2BgNVBAMTL1N0
      YXJ0Q29tIENsYXNzIDEgUHJpbWFyeSBJbnRlcm1lZGlhdGUgQ2xpZW50IENBMIIB
      IjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxwmDzM4t2BqxKaQuE6uWvooy
      g4ymiEGWVUet1G8SD+rqvyNH4QrvnEIaFHxOhESip7vMz39ScLpNLbL1QpOlPW/t
      FIzNHS3qd2XRNYG5Sv9RcGE+T4qbLtsjjJbi6sL7Ls/f/X9ftTyhxvxWkf8KW37i
      KrueKsxw2HqolH7GM6FX5UfNAwAu4ZifkpmZzU1slBhyWwaQPEPPZRsWoTb7q8hm
      gv6Nv3Hg9rmA1/VPBIOQ6SKRkHXG0Hhmq1dOFoAFI411+a/9nWm5rcVjGcIWZ2v/
      43Yksq60jExipA4l5uv9/+Hm33mbgmCszdj/Dthf13tgAv2O83hLJ0exTqfrlwID
      AQABo4IBrTCCAakwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYwHQYD
      VR0OBBYEFFNy7ZKc4NrLAVx8fpY1TvLUuFGCMB8GA1UdIwQYMBaAFE4L7xqkQFul
      F2mHMMo0aEPQQa7yMGYGCCsGAQUFBwEBBFowWDAnBggrBgEFBQcwAYYbaHR0cDov
      L29jc3Auc3RhcnRzc2wuY29tL2NhMC0GCCsGAQUFBzAChiFodHRwOi8vd3d3LnN0
      YXJ0c3NsLmNvbS9zZnNjYS5jcnQwWwYDVR0fBFQwUjAnoCWgI4YhaHR0cDovL3d3
      dy5zdGFydHNzbC5jb20vc2ZzY2EuY3JsMCegJaAjhiFodHRwOi8vY3JsLnN0YXJ0
      c3NsLmNvbS9zZnNjYS5jcmwwgYAGA1UdIAR5MHcwdQYLKwYBBAGBtTcBAgEwZjAu
      BggrBgEFBQcCARYiaHR0cDovL3d3dy5zdGFydHNzbC5jb20vcG9saWN5LnBkZjA0
      BggrBgEFBQcCARYoaHR0cDovL3d3dy5zdGFydHNzbC5jb20vaW50ZXJtZWRpYXRl
      LnBkZjANBgkqhkiG9w0BAQUFAAOCAgEACoMIfXirLAZcuGOMXq4cuSN3TaFx2H2G
      vD5VSy/6rV55BYHbWNaPeQn3oBSU8KgQZn/Kck1JxbLpAxVCNtsxeW1R87ifhsYZ
      0qjdrA9anrW2MAWCtosmAOT4OxK9QPoSjCMxM3HbkZCDJgnlE8jMopH21BbyAYr7
      b5EfGRQJNtgWcvqSXwKHnTutR08+Kkn0KAkXCzeQNLeA5LlYUzFyM7kPAp8pIRMQ
      +seHunmyG642S2+y/qHEdMuGIwpfz3eDF1PdctL04qYK/zu+Qg1Bw0RwgigVZs/0
      c5HP2/e9DBHh7eSwtzYlk4AUr6yxLlcwSjOfOmKEQ/Q8tzh0IFiNu9IPuTGAPBn4
      CPxD0+Ru8T2wg8/s43R/PT3kd1OEqOJUl7q+h+r6fpvU0Fzxd2tC8Ga6fDEPme+1
      Nbi+03pVjuZQKbGwKJ66gEn06WqaxVZC+J8hh/jR0k9mST1iAZPNYulcNJ8tKmVt
      jYsv0L1TSm2+NwON58tO+pIVzu3DWwSEXSf+qkDavQam+QtEOZxLBXI++aMUEapS
      n+k3Lxm48ZCYfAWLb/Xj7F5JQMbZvCexglAbYR0kIHqW5DnsYSdMD/IplJMojx0N
      BrxJ3fN9dvX2Y6BIXRsF1du4qESm4/3CKuyUV7p9DW3mPlHTGLvYxnyKQy7VFBko
      LINszBrOUeI=
      -----END CERTIFICATE-----
