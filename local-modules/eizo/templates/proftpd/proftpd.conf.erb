# Modules
LoadModule mod_sftp.c
LoadModule mod_auth_file.c

UseIPv6

ServerName              <%= @hostname %>
ServerTpe               standalone
DeferWelcome            off

User                    proftpd
Group                   nogroup

Port                    <%= @port %>
SFTPEngine              on
SFTPLog                 /var/log/proftpd/sftp.log
TransferLog             /var/log/proftpd/sftp-xferlog

# Host Keys (same as SSH)
SFTPHostKey             /etc/ssh/ssh_host_rsa_key
SFTPHostKey             /etc/ssh/ssh_host_dsa_key
SFTPHostKey             /etc/ssh_host_ecdsa_key

# Auth methods
AuthOrder               mod_auth_file.c
AuthUserFile            /etc/proftpd/users
SFTPAuthMethods         publickey
SFTPAuthorizedUserKeys  file:/etc/proftpd/users.keys/%u
DefaultRoot             ~

# Read-only users
DirFakeMode             0444
DirFakeGroup            ftp
DirFakeUser             ftp
<Limit WRITE>
  DenyAll
</Limit>
